<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IPS Interconsultas ‚Äî Reporte de Mantenimiento</title>
  <style>
    /* RESET */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: "Arial", sans-serif;
      background:#061c36;
      color:#fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }

    /* Part√≠culas placeholder (igual estilo que index) */
    #particles-js{position:fixed;inset:0;width:100%;height:100%;z-index:-1}

    /* NAV */
    nav{
      background:rgba(10,42,87,0.95);
      padding:1rem 1.5rem;
      position:sticky;
      top:0;
      z-index:20;
      box-shadow:0 2px 8px rgba(0,0,0,0.25);
    }
    .nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:.6rem;text-decoration:none;color:#fff;font-weight:700}
    .brand img{height:40px}
    .nav-links a{color:#fff;text-decoration:none;margin-left:1rem;font-weight:500;transition:color .18s}
    .nav-links a:hover{color:#06b6d4}

    /* LAYOUT */
    .page-wrap{max-width:1100px;margin:2.2rem auto;padding:0 1rem}
    .form-card{
      background:rgba(16,44,87,0.96);
      border-radius:12px;
      padding:1.6rem;
      box-shadow:0 10px 30px rgba(0,0,0,0.5);
      border:1px solid rgba(10,30,60,0.25);
    }

    .title {
      color:#06b6d4;
      text-align:center;
      font-size:1.4rem;
      margin-bottom:0.8rem;
      font-weight:700;
    }

    .subtitle { color:#cfeef8; font-size:0.95rem; text-align:center; margin-bottom:1.2rem }

    /* SECTION TITLES */
    .section {
      margin-top:1rem;
      padding:0.8rem 0;
      border-radius:8px;
      background:linear-gradient(180deg, rgba(13,39,77,0.25), rgba(13,39,77,0.08));
      border-left:4px solid #06b6d4;
      margin-bottom:0.6rem;
      font-weight:700;
      color:#e6f9fb;
    }

    /* GRID FORM */
    .grid {
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:12px;
      align-items:start;
    }
    .col-12{grid-column:span 12}
    .col-6{grid-column:span 6}
    .col-4{grid-column:span 4}
    .col-3{grid-column:span 3}
    @media (max-width:800px){
      .col-6,.col-4,.col-3{grid-column:span 12}
    }

    label{display:block;font-weight:700;color:#dbeef6;margin-bottom:6px;font-size:0.95rem}
    .field{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:0;
      background:#0d274d;
      color:#fff;
      font-size:0.95rem;
    }
    .field:focus{outline:2px solid #06b6d4}
    textarea.field{min-height:84px;resize:vertical;padding-top:10px}

    .help{font-size:0.82rem;color:#9ed7e6;margin-top:6px}

    /* radios / inline */
    .inline-list{display:flex;flex-wrap:wrap;gap:8px}
    .inline-item{background:transparent;padding:.35rem .6rem;border-radius:8px;border:1px solid rgba(255,255,255,0.06);display:flex;align-items:center;gap:.5rem;cursor:pointer}
    .inline-item input{transform:scale(1.05)}

    /* footer actions */
    .actions{display:flex;gap:12px;justify-content:center;margin-top:1.1rem}
    .btn{
      padding:12px 20px;border-radius:28px;border:0;font-weight:700;cursor:pointer;font-size:1rem;
    }
    .btn.primary{background:linear-gradient(90deg,#06b6d4,#3b82f6);color:#fff;box-shadow:0 6px 18px rgba(6,182,212,0.12)}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.08);color:#d9f6fb}
    .note{font-size:0.88rem;color:#bfeff8;text-align:center;margin-top:0.8rem}

    /* success / error */
    .toast{
      position:fixed;right:18px;bottom:18px;background:#023a5e;color:#eaffff;padding:12px 16px;border-radius:8px;box-shadow:0 8px 20px rgba(0,0,0,0.4);z-index:60
    }

    /* small text columns */
    .two-col { display:grid;grid-template-columns:1fr 1fr;gap:10px }
    @media (max-width:600px){ .two-col{grid-template-columns:1fr} }

  </style>
</head>
<body>
  <!-- particles placeholder -->
  <div id="particles-js"></div>

  <!-- NAV -->
  <nav>
    <div class="nav-inner">
      <a class="brand" href="index.html">
        <img src="Logo-Interconsultas-01b-500px.png" alt="Logo" />
        <span>IPS Interconsultas</span>
      </a>
      <div class="nav-links">
        <a href="index.html">Inicio</a>
        <a href="index.html#servicios">Servicios</a>
        <a href="index.html#contacto">Contacto</a>
        <a href="formulario.html">Formulario</a>
        <a href="videos.html">Videos</a>
      </div>
    </div>
  </nav>

  <!-- PAGE -->
  <div class="page-wrap">
    <div class="form-card" role="main" aria-labelledby="formTitle">
      <div id="formTitle" class="title">üìã Formulario de Reporte - IPS Interconsultas</div>
      <div class="subtitle">Complete el formulario con la mayor cantidad de detalle posible. Los campos marcados con * son obligatorios.</div>

      <form id="reporteForm" autocomplete="off">
        <div class="section">1. Datos b√°sicos</div>

        <div class="grid">
          <div class="col-4">
            <label for="marcaTemporal">Marca temporal</label>
            <input id="marcaTemporal" name="marca_temporal" class="field" type="datetime-local" />
            <div class="help">Se registrar√° tambi√©n la fecha/hora del env√≠o en la hoja.</div>
          </div>

          <div class="col-4">
            <label for="correo">Direcci√≥n de correo electr√≥nico *</label>
            <input id="correo" name="correo" class="field" type="email" placeholder="ejemplo@dominio.com" required />
          </div>

          <div class="col-2">
            <label for="fecha">Fecha *</label>
            <input id="fecha" name="fecha" class="field" type="date" required />
          </div>

          <div class="col-2">
            <label for="hora">Hora *</label>
            <input id="hora" name="hora" class="field" type="time" required />
          </div>

          <div class="col-6">
            <label for="nombre">Nombre completo *</label>
            <input id="nombre" name="nombre" class="field" type="text" placeholder="Nombre y apellidos" required />
          </div>

          <div class="col-6">
            <label for="reporteIngresa">Reporte ingresa por</label>
            <select id="reporteIngresa" name="reporte_ingresa_por" class="field">
              <option value="">Seleccione...</option>
              <option value="Usuario">Usuario</option>
              <option value="Administrativo">Administrativo</option>
              <option value="T√©cnico">T√©cnico</option>
              <option value="Otro">Otro</option>
            </select>
          </div>
        </div>

        <div class="section">2. Ubicaci√≥n y relaci√≥n</div>
        <div class="grid">
          <div class="col-6">
            <label for="seRelaciona">El reporte se relaciona con</label>
            <select id="seRelaciona" name="reporte_se_relaciona" class="field">
              <option value="">Seleccione...</option>
              <option value="Infraestructura">Infraestructura</option>
              <option value="Equipos">Equipos</option>
              <option value="Infraestructura y Equipos">Infraestructura y Equipos</option>
              <option value="Otro">Otro</option>
            </select>
          </div>

          <div class="col-6">
            <label for="area">√Årea espec√≠fica</label>
            <input id="area" name="area" class="field" type="text" placeholder="Ej: Consultorio 106, Sala de espera" />
          </div>

          <div class="col-6">
            <label for="ubicSpec">Ubicaci√≥n espec√≠fica</label>
            <input id="ubicSpec" name="ubicacion_especifica" class="field" type="text" placeholder="Piso, consultorio, mobiliario" />
          </div>

          <div class="col-6">
            <label for="sede">Sede donde est√° ubicado *</label>
            <select id="sede" name="sede" class="field" required>
              <option value="">Seleccione sede...</option>
              <option value="Sede 1">Sede 1</option>
              <option value="Sede 2">Sede 2</option>
              <option value="Sede 3">Sede 3</option>
              <option value="Sede 4">Sede 4</option>
            </select>
          </div>
        </div>

        <div class="section">3. Clasificaci√≥n y prioridad</div>
        <div class="grid">
          <div class="col-6">
            <label for="clasificacionPrioridad">Clasificaci√≥n de prioridad</label>
            <select id="clasificacionPrioridad" name="clasificacion_prioridad" class="field">
              <option value="">Seleccione...</option>
              <option value="Cr√≠tica">Cr√≠tica</option>
              <option value="Alta">Alta</option>
              <option value="Media">Media</option>
              <option value="Baja">Baja</option>
            </select>
            <div class="help">Use Clasificaci√≥n adecuada para priorizar atenci√≥n.</div>
          </div>

          <div class="col-6">
            <label for="categoria">Categor√≠a del reporte *</label>
            <select id="categoria" name="categoria_reporte" class="field" required>
              <option value="">Seleccione...</option>
              <option value="infraestructura">Infraestructura y equipos de apoyo</option>
              <option value="electricos">Equipos el√©ctricos</option>
              <option value="electronicos">Equipos electr√≥nicos</option>
              <option value="computo">Equipos de c√≥mputo</option>
              <option value="muebles">Muebles y enseres</option>
            </select>
          </div>

          <div class="col-12">
            <label for="equipoReportar">El equipo a reportar es</label>
            <input id="equipoReportar" name="equipo_a_reportar" class="field" type="text" placeholder="Ej: Autoclave, Monitor, Aire acondicionado, Silla" />
          </div>

          <div class="col-12">
            <label for="danoReportar">Da√±o a reportar / s√≠ntoma</label>
            <input id="danoReportar" name="dano_a_reportar" class="field" type="text" placeholder="Breve s√≠ntoma (ej: no enciende, pantalla negra)" />
          </div>

          <div class="col-6">
            <label for="prioridadCaso">Prioridad del caso</label>
            <select id="prioridadCaso" name="prioridad_caso" class="field">
              <option value="">Seleccione...</option>
              <option value="Alta">Alta</option>
              <option value="Media">Media</option>
              <option value="Baja">Baja</option>
            </select>
          </div>

        </div>

        <div class="section">4. Detalle por tipo (rellene seg√∫n corresponda)</div>
        <div class="grid">
          <div class="col-12">
            <label>Infraestructura y equipos de apoyo ‚Äî Descripci√≥n detallada</label>
            <textarea name="desc_infraestructura" class="field" placeholder="Describa la falla o problema de infraestructura (ej: filtraci√≥n, grieta, ventana rota)"></textarea>
          </div>

          <div class="col-12">
            <label>Equipos el√©ctricos ‚Äî Descripci√≥n detallada</label>
            <textarea name="desc_electricos" class="field" placeholder="Describa problemas el√©ctricos (ej: cortocircuito, no enciende)"></textarea>
          </div>

          <div class="col-12">
            <label>Equipos electr√≥nicos ‚Äî Descripci√≥n detallada</label>
            <textarea name="desc_electronicos" class="field" placeholder="Describa problemas electr√≥nicos (ej: c√°maras, monitores)"></textarea>
          </div>

          <div class="col-12">
            <label>Equipos de c√≥mputo ‚Äî Descripci√≥n detallada</label>
            <textarea name="desc_computo" class="field" placeholder="Describa problemas en computadores, impresoras o red"></textarea>
          </div>

          <div class="col-12">
            <label>Muebles y enseres ‚Äî Descripci√≥n detallada</label>
            <textarea name="desc_muebles" class="field" placeholder="Describa desperfectos en muebles y enseres"></textarea>
          </div>
        </div>

        <div class="section">5. Informaci√≥n adicional y seguimiento</div>
        <div class="grid">
          <div class="col-6">
            <label for="estado">ESTADO</label>
            <select id="estado" name="estado" class="field">
              <option value="">Seleccione...</option>
              <option value="Pendiente">Pendiente</option>
              <option value="En gesti√≥n">En gesti√≥n</option>
              <option value="Cerrado">Cerrado</option>
            </select>
          </div>

          <div class="col-6">
            <label for="descripcionEstado">Descripci√≥n del estado</label>
            <input id="descripcionEstado" name="descripcion_estado" class="field" type="text" placeholder="Resumen del estado actual" />
          </div>

          <div class="col-6">
            <label for="fechaCierre">Fecha de cierre</label>
            <input id="fechaCierre" name="fecha_cierre" class="field" type="date" />
          </div>

          <div class="col-6">
            <label for="horaCierre">Hora de cierre</label>
            <input id="horaCierre" name="hora_cierre" class="field" type="time" />
          </div>

          <div class="col-6">
            <label for="observacion">Observaci√≥n</label>
            <textarea id="observacion" name="observacion" class="field" placeholder="Observaciones finales o notas"></textarea>
          </div>

          <div class="col-6">
            <label for="responsable">Responsable</label>
            <input id="responsable" name="responsable" class="field" type="text" placeholder="Persona encargada" />
          </div>

          <div class="col-6">
            <label for="enviadoCorreo">Enviado al correo</label>
            <input id="enviadoCorreo" name="enviado_al_correo" class="field" type="email" placeholder="correo@dominio.com" />
          </div>

          <div class="col-6">
            <label for="cumplio">¬øSe cumpli√≥?</label>
            <select id="cumplio" name="se_cumplio" class="field">
              <option value="">Seleccione...</option>
              <option value="Si">S√≠</option>
              <option value="No">No</option>
            </select>
          </div>

          <div class="col-6">
            <label for="col37">Column 37 (uso interno)</label>
            <input id="col37" name="columna_37" class="field" type="text" placeholder="Dato extra (columna 37)" />
          </div>

          <div class="col-6">
            <label for="tiempoRespuesta">Tiempo de respuesta</label>
            <input id="tiempoRespuesta" name="tiempo_respuesta" class="field" type="text" placeholder="Ej: 2 d√≠as, 6 horas" />
          </div>

          <div class="col-6">
            <label for="col39">Columna 39 (uso interno)</label>
            <input id="col39" name="columna_39" class="field" type="text" placeholder="Dato extra (columna 39)" />
          </div>

          <div class="col-6">
            <label for="col40">Columna 40 (uso interno)</label>
            <input id="col40" name="columna_40" class="field" type="text" placeholder="Dato extra (columna 40)" />
          </div>

        </div>

        <div class="note">Revise los datos antes de enviar. Puede dejar campos vac√≠os si no aplica.</div>

        <div class="actions" role="group" aria-label="Acciones del formulario">
          <button type="button" id="previewBtn" class="btn ghost">Vista previa</button>
          <button type="reset" class="btn ghost">Limpiar</button>
          <button type="submit" class="btn primary">Enviar reporte</button>
        </div>
      </form>
    </div>
  </div>

  <!-- FOOTER -->
  <footer style="margin-top:2rem;padding:1rem 0;text-align:center;background:transparent">
    &copy; 2025 IPS Interconsultas - Todos los derechos reservados
  </footer>

  <!-- SCRIPTS PARTICULAS -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    // Particles (igual configuraci√≥n que index)
    particlesJS("particles-js", {
      "particles": {
        "number": { "value": 60 },
        "size": { "value": 3 },
        "move": { "speed": 2 },
        "line_linked": { "enable": true, "color": "#06b6d4" }
      }
    });

    // Din√°mica: mostrar secciones seg√∫n la categor√≠a seleccionada
    (function(){
      const categoriaEl = document.getElementById('categoria');
      const sectionsToToggle = ['infraestructura','electricos','electronicos','computo','muebles'];
      // hide all initially
      sectionsToToggle.forEach(id => {
        const el = document.getElementById(id);
        if(el) el.style.display = 'none';
      });

      categoriaEl && categoriaEl.addEventListener('change', function(){
        const val = this.value;
        sectionsToToggle.forEach(id => {
          const el = document.getElementById(id);
          if(!el) return;
          el.style.display = (id === val) ? 'block' : 'none';
        });
      });
    })();

    // Vista previa simple (abre un modal-like peque√±o)
    (function(){
      const previewBtn = document.getElementById('previewBtn');
      previewBtn && previewBtn.addEventListener('click', function(){
        const form = document.getElementById('reporteForm');
        const data = new FormData(form);
        let html = '<div style="font-family:Arial;color:#061c36">';
        html += '<h3>Vista previa r√°pida</h3><ul style="list-style:none;padding:0">';
        for (const [k,v] of data.entries()){
          if(v && v.toString().trim() !== '') html += `<li><strong>${k.replace(/_/g,' ')}:</strong> ${v}</li>`;
        }
        html += '</ul></div>';
        const w = window.open('', '_blank', 'width=600,height=600,scrollbars=yes');
        w.document.write(`<body style="font-family:Arial;background:#f4f7fb;padding:18px">${html}</body>`);
        w.document.close();
      });
    })();

    // Env√≠o a Google Apps Script WebApp
    (function(){
      const scriptURL = "https://script.google.com/macros/s/AKfycbyhTYQlEpLFZIObGFLiFtOAStwuEUw6xsTTVjh-xDmWfVDunYO_ccszitMLtFYv9p7e1w/exec";
      const form = document.getElementById('reporteForm');

      form.addEventListener('submit', function(e){
        e.preventDefault();

        // validaci√≥n m√≠nima: correo y categor√≠a obligatorios
        const correo = form.querySelector('[name="correo"]').value.trim();
        const categoria = form.querySelector('[name="categoria_reporte"]').value.trim();
        if(!correo){
          alert("Por favor ingrese la direcci√≥n de correo.");
          return;
        }
        if(!categoria){
          alert("Por favor seleccione la categor√≠a del reporte.");
          return;
        }

        // Enviar
        const btn = form.querySelector('button[type="submit"]');
        btn.disabled = true;
        btn.textContent = "Enviando...";

        fetch(scriptURL, { method: 'POST', body: new FormData(form) })
          .then(response => {
            if(!response.ok) throw new Error("Error en la respuesta: " + response.status);
            return response.text();
          })
          .then(() => {
            showToast("‚úÖ Reporte enviado correctamente");
            form.reset();
            // ocultar todas las secciones din√°micas otra vez
            ['infraestructura','electricos','electronicos','computo','muebles'].forEach(id=>{
              const el = document.getElementById(id); if(el) el.style.display='none';
            });
          })
          .catch(err => {
            console.error(err);
            showToast("‚ùå Error al enviar: " + (err.message||err));
          })
          .finally(()=>{
            btn.disabled = false;
            btn.textContent = "Enviar reporte";
          });
      });

      function showToast(message){
        const t = document.createElement('div');
        t.className = 'toast';
        t.textContent = message;
        document.body.appendChild(t);
        setTimeout(()=> t.remove(), 5000);
      }
    })();
  </script>
</body>
</html>

