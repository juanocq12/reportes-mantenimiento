<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IPS Interconsultas - Formulario avanzado de mantenimiento</title>
  <style>
    /* Manteniendo su paleta y estilo, pero mejorando la lectura y jerarqu√≠a */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height: 100%; }
    body {
      font-family: Arial, sans-serif;
      background-color: #061c36;
      color: #fff;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      line-height: 1.5;
      padding-bottom: 60px;
    }

    #particles-js { position: fixed; inset: 0; z-index: -1; }

    nav {
      background: rgba(10,42,87,0.95);
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 20;
      box-shadow: 0 3px 10px rgba(0,0,0,0.35);
    }
    .nav-inner { max-width:1100px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; }
    .brand { display:flex; gap:.6rem; align-items:center; color:#fff; text-decoration:none; font-weight:700; }
    .brand img { height:40px; }
    .nav-links a { color:#fff; text-decoration:none; margin-left:1.2rem; font-weight:500; }
    .nav-links a:hover { color:#06b6d4; }

    .wrap { max-width:1100px; margin: 2.5rem auto; padding: 0 1rem; }

    .form-container {
      background: rgba(16,44,87,0.95);
      padding: 1.6rem;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    }

    .header-row { display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-bottom:0.75rem; }
    .title {
      display:flex; gap:.8rem; align-items:center;
    }
    .title h1 { color:#06b6d4; font-size:1.3rem; margin-bottom:.1rem; }
    .subtitle { color:#a8c5e6; font-size:.9rem; }

    .progress-bar { height:8px; background:#0a2a57; border-radius:6px; overflow:hidden; margin: 1rem 0; }
    .progress { width:0%; height:100%; background:linear-gradient(90deg,#06b6d4,#3b82f6); transition:width .25s ease; }

    form .card { background: rgba(13,39,77,0.85); padding:1rem; border-radius:10px; margin-bottom:1rem; border:1px solid rgba(6,182,212,0.06); }
    .card .section-title { display:flex; align-items:center; gap:.6rem; font-weight:700; color:#3b82f6; margin-bottom:.6rem; border-left:4px solid #06b6d4; padding-left:.6rem; }
    label { display:block; margin-top:.5rem; margin-bottom:.35rem; font-weight:600; color:#e5f4ff; }
    input[type="text"], input[type="email"], input[type="file"], select, textarea {
      width:100%; padding:.7rem; border-radius:8px; background:#0d274d; border:none; color:#fff; font-size:1rem;
    }
    input[readonly] { opacity:.9; background:#09203f; }
    textarea { min-height:80px; resize:vertical; }

    .row { display:flex; gap:1rem; margin-top:.5rem; }
    .col { flex:1; }

    .small { font-size:.9rem; color:#9fc7e2; margin-top:.4rem; }

    .btn { display:inline-block; border-radius:30px; padding:.9rem 1.2rem; font-weight:700; cursor:pointer; border:none; }
    .btn.primary { background:linear-gradient(90deg,#06b6d4,#3b82f6); color:#fff; }
    .btn.ghost { background:transparent; color:#a8c5e6; border:1px solid rgba(255,255,255,0.06); }

    .footer { text-align:center; color:#a0aec0; margin-top:1rem; font-size:.9rem; }

    /* modal */
    .modal { position:fixed; inset:0; display:none; background:rgba(0,0,0,0.7); z-index:60; align-items:center; justify-content:center; padding:1rem; }
    .modal .box { background:rgba(16,44,87,0.98); padding:1.4rem; border-radius:10px; width:100%; max-width:520px; box-shadow:0 6px 18px rgba(6,182,212,0.08); text-align:center; color:#fff; }
    .modal h3 { color:#06b6d4; margin-bottom:.6rem; }

    /* responsive */
    @media (max-width:800px) {
      .row { flex-direction:column; }
      .header-row { flex-direction:column; align-items:flex-start; gap:.5rem; }
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <nav>
    <div class="nav-inner">
      <a class="brand" href="#">
        <img src="Logo-Interconsultas-01b-500px.png" alt="Logo">
        <div>
          <div style="font-weight:800">IPS Interconsultas</div>
          <div style="font-size:.85rem;color:#a8c5e6">Solicitudes a Mantenimiento (locativo y biom√©dico)</div>
        </div>
      </a>
      <div class="nav-links">
        <a href="#">Inicio</a>
        <a href="#servicios">Servicios</a>
        <a href="#contacto">Contacto</a>
        <a href="#formulario">Formulario</a>
        <a href="#reportes">Reportes</a>
      </div>
    </div>
  </nav>

  <div class="wrap">
    <section class="form-container" id="formulario">
      <div class="header-row">
        <div class="title">
          <h1>üìã Solicitud a Mantenimiento ‚Äî Formulario</h1>
          <div class="subtitle">Secci√≥n 1 de 8 ¬∑ Este formulario captura correo, fecha y hora autom√°ticas.</div>
        </div>
        <div style="text-align:right">
          <div id="userEmail" class="small">Usuario: (correo se captura al enviar)</div>
          <div class="small" id="idNote">ID: -</div>
        </div>
      </div>

      <div class="progress-bar"><div class="progress" id="progress"></div></div>

      <form id="reporteForm" class="report-form">

        <!-- ID + fecha/hora + nombre + tipo -->
        <div class="card">
          <div class="section-title">Datos b√°sicos</div>
          <div class="row">
            <div class="col">
              <label>ID del reporte</label>
              <input type="text" id="idReporte" name="idReporte" readonly>
            </div>
            <div class="col">
              <label>Fecha del reporte</label>
              <input type="text" id="fecha" name="fecha" readonly>
            </div>
            <div class="col">
              <label>Hora del reporte</label>
              <input type="text" id="hora" name="hora" readonly>
            </div>
          </div>

          <label>Nombre completo <span style="color:#ffdede">*</span></label>
          <input type="text" id="nombre" name="nombre" required placeholder="Ej: Juan Manuel Correa">

          <div class="row">
            <div class="col">
              <label>El reporte se relaciona con <span style="color:#ffdede">*</span></label>
              <select id="tipo_reporte" name="tipo_reporte" required>
                <option value="">Seleccione...</option>
                <option value="infraestructura">Infraestructura</option>
                <option value="equipo_medico">Equipo M√©dicos</option>
              </select>
              <div class="small">Elija Infraestructura para temas locativos; Equipo M√©dicos para dispositivos biom√©dicos.</div>
            </div>

            <div class="col">
              <label>Correo electr√≥nico (opcional)</label>
              <input type="email" id="email" name="email" placeholder="Su correo (se registra autom√°ticamente cuando env√≠a)">
            </div>
          </div>
        </div>

        <!-- SECTION 2: INFRAESTRUCTURA (detalle amplio) -->
        <div id="section_infra" class="card" style="display:none;">
          <div class="section-title">Secci√≥n 2 de 8 ‚Äî REPORTE: INFRAESTRUCTURA</div>

          <label>Descripci√≥n (opcional)</label>
          <textarea id="desc_infra_general" name="desc_infra_general" placeholder="Resumen breve (opcional)"></textarea>

          <div class="row">
            <div class="col">
              <label>√Årea espec√≠fica <span style="color:#ffdede">*</span></label>
              <select id="area_infra" name="area_infra" required>
                <option value="">Seleccione...</option>
                <option>Laboratorio</option>
                <option>Enfermeria</option>
                <option>Consulta externa</option>
                <option>Odontologia</option>
                <option>Administraci√≥n</option>
                <option>Atencion Al Usuario</option>
                <option>Areas Comunes</option>
              </select>
            </div>

            <div class="col">
              <label>Sede donde est√° ubicado <span style="color:#ffdede">*</span></label>
              <select id="sede_infra" name="sede_infra" required>
                <option value="">Seleccione...</option>
                <option>Sede 1</option>
                <option>Sede 2</option>
                <option>Sede 3</option>
                <option>Sede 4</option>
                <option>Sede 5</option>
              </select>
            </div>
          </div>

          <label>Ubicaci√≥n espec√≠fica <span style="color:#ffdede">*</span></label>
          <select id="ubicacion_infra" name="ubicacion_infra" required>
            <!-- Se carga con JS (lista larga) -->
          </select>

          <div class="row">
            <div class="col">
              <label>Clasificaci√≥n de prioridad <span style="color:#ffdede">*</span></label>
              <select id="prioridad_infra" name="prioridad_infra" required>
                <option value="">Seleccione...</option>
                <option>Urgente: se detiene el servicio por este da√±o (6 horas)</option>
                <option>Prioritario: no detiene el servicio pero debe ser resuelto prontamente (48 horas)</option>
                <option>Programado: no detiene el servicio y puede ser resuelto dentro del cronograma del √°rea (192 horas)</option>
              </select>
            </div>

            <div class="col">
              <label>Categor√≠a del reporte <span style="color:#ffdede">*</span></label>
              <select id="categoria_infra" name="categoria_infra" required>
                <option value="">Seleccione...</option>
                <option>Equipos de c√≥mputo (conexiones f√≠sicas, error "relaci√≥n de confianza")</option>
                <option>Muebles y enseres (Escritorios, portateclados, puertas, sillas)</option>
                <option>Equipos electr√≥nicos (Partes f√≠sicas del tel√©fono, televisores, camaras, timbres)</option>
                <option>Equipos el√©ctricos (Radios, video beam, l√°mparas, hornos microondas, grecas)</option>
                <option>Infraestructura y equipos de apoyo (Paredes, techos, pisos, tanques se reserva de agua, plantas el√©ctricas, ascensores, salvaescaleras, aires acondicionados, compresores)</option>
              </select>
            </div>
          </div>

          <label>Descripci√≥n detallada del reporte (obligatorio si aplica)</label>
          <textarea id="detalle_infra" name="detalle_infra" placeholder="Describa con detalle la falla o novedad..."></textarea>

          <!-- Infraestructura sub-opciones (secci√≥n 4) -->
          <div style="margin-top:1rem;">
            <div class="section-title">Secci√≥n 4 de 8 ‚Äî Infraestructura y equipos de apoyo</div>
            <label>Seleccione el elemento (si aplica)</label>
            <select id="infra_elemento" name="infra_elemento">
              <option value="">(No aplica)</option>
              <option>Cambiador de beb√©s</option>
              <option>Pared (resanar, pintar, grietas, humedad)</option>
              <option>Techo (humedad, goteras, plafones, claraboyas, celos√≠as, acrilico)</option>
              <option>Piso (despegado, deteriorado, h√∫medo)</option>
              <option>Ventana (vidrio, marcos, cortinas)</option>
              <option>Puerta principal (chapa, bisagra, cierre)</option>
              <option>Tanque de reserva de agua</option>
              <option>Planta el√©ctrica</option>
              <option>Ascensor</option>
              <option>Salvaescaleras</option>
              <option>Aire acondicionado</option>
              <option>Compresor de aire</option>
              <option>Extractor o ventilador de techo</option>
              <option>Canaletas o bajantes</option>
              <option>Se√±alizaci√≥n o letreros</option>
              <option>Accesos (rampas, pasamanos, barandas)</option>
              <option>Lavamanos (Filtraci√≥n de agua, da√±o de manija)</option>
              <option>Puerta (Chapa, deterioro, fisura)</option>
              <option>Poceta (Filtraci√≥n de agua, humedad)</option>
              <option>Sanitario (Filtraci√≥n de agua, da√±o de manija)</option>
              <option>Dispensadores (Despegados, robo de insumo)</option>
              <option>Luminaria (Fundida, opaca)</option>
              <option>Timbre de emergencia</option>
              <option>Lavaplatos (Filtraci√≥n de agua, da√±o de manija)</option>
              <option>Gabinete (Suelto, manija despegada)</option>
              <option>Nevera o congelador</option>
            </select>

            <label>Descripci√≥n detallada de la falla o del problema</label>
            <textarea id="detalle_infra2" name="detalle_infra2" placeholder="Describa la falla del elemento seleccionado..."></textarea>
          </div>

          <!-- Secci√≥n 5: Equipos el√©ctricos -->
          <div style="margin-top:1rem;">
            <div class="section-title">Secci√≥n 5 de 8 ‚Äî Equipos el√©ctricos</div>
            <label>Elemento el√©ctrico</label>
            <select id="equipo_electrico" name="equipo_electrico">
              <option value="">(No aplica)</option>
              <option>L√°mpara LED / Fluorescente</option>
              <option>Bombillo</option>
              <option>Video beam</option>
              <option>Radio</option>
              <option>Horno microondas</option>
              <option>Greca</option>
              <option>Calentador</option>
              <option>Prolongadores y multitomas</option>
              <option>Toma corriente</option>
              <option>Enchufe o interruptor</option>
            </select>
            <label>Descripci√≥n detallada de la falla o del problema</label>
            <textarea id="detalle_electrico" name="detalle_electrico" placeholder="Describa la falla el√©ctrica..."></textarea>
          </div>

          <!-- Secci√≥n 6: Equipos electr√≥nicos -->
          <div style="margin-top:1rem;">
            <div class="section-title">Secci√≥n 6 de 8 ‚Äî Equipos electr√≥nicos</div>
            <label>Elemento electr√≥nico</label>
            <select id="equipo_electronico" name="equipo_electronico">
              <option value="">(No aplica)</option>
              <option>Tel√©fono fijo (f√≠sico o inal√°mbrico)</option>
              <option>C√°mara de seguridad</option>
              <option>Timbre o cit√≥fono</option>
              <option>Control remoto</option>
              <option>Televisor</option>
              <option>Grabadora</option>
              <option>Bocina o parlante</option>
            </select>
            <label>Descripci√≥n detallada de la falla o del problema</label>
            <textarea id="detalle_electronico" name="detalle_electronico" placeholder="Describa la falla electr√≥nica..."></textarea>
          </div>

          <!-- Secci√≥n 7: Equipos de c√≥mputo -->
          <div style="margin-top:1rem;">
            <div class="section-title">Secci√≥n 7 de 8 ‚Äî Equipos de c√≥mputo</div>
            <label>Elemento de c√≥mputo</label>
            <select id="equipo_computo" name="equipo_computo">
              <option value="">(No aplica)</option>
              <option>Computador de escritorio</option>
              <option>Port√°til</option>
              <option>Teclado</option>
              <option>Mouse</option>
              <option>Monitor</option>
              <option>Cable de red / punto de red</option>
              <option>Fuente de poder</option>
              <option>UPS</option>
              <option>Problema de "relaci√≥n de confianza"</option>
              <option>Da√±o en el sistema operativo</option>
              <option>Da√±o en disco duro</option>
              <option>Da√±o en conexi√≥n HDMI / VGA / USB</option>
              <option>Impresora</option>
            </select>
            <label>Descripci√≥n detallada del reporte (c√≥mputo)</label>
            <textarea id="detalle_computo" name="detalle_computo" placeholder="Describa la falla de c√≥mputo..."></textarea>
          </div>

          <!-- Secci√≥n 8: Muebles y enseres -->
          <div style="margin-top:1rem;">
            <div class="section-title">Secci√≥n 8 de 8 ‚Äî Muebles y enseres</div>
            <label>Elemento (muebles y enseres)</label>
            <select id="mueble_ensenes" name="mueble_ensenes">
              <option value="">(No aplica)</option>
              <option>Escritorio</option>
              <option>Portateclado</option>
              <option>Archivador</option>
              <option>Silla Interlocutora</option>
              <option>Butaco giratorio</option>
              <option>Silla odontol√≥gica</option>
              <option>Puertas internas</option>
              <option>Camilla</option>
              <option>Lockers</option>
              <option>M√≥dulo de toma de muestras</option>
              <option>Cajonera</option>
              <option>Repisa</option>
              <option>Divisiones / biombos</option>
              <option>Escalerilla</option>
              <option>Recipiente de residuos</option>
              <option>Descansa pies</option>
              <option>Silla Anfitri√≥n</option>
              <option>Silla Secretarial</option>
              <option>Persianas y cortinas</option>
              <option>Cambiador de bebe</option>
              <option>Silla pl√°stica</option>
            </select>
            <label>Descripci√≥n detallada del reporte (muebles)</label>
            <textarea id="detalle_muebles" name="detalle_muebles" placeholder="Describa el da√±o en muebles..."></textarea>
          </div>
        </div>

        <!-- SECTION 3: EQUIPOS M√âDICOS -->
        <div id="section_med" class="card" style="display:none;">
          <div class="section-title">Secci√≥n 3 de 8 ‚Äî REPORTE: EQUIPOS M√âDICOS</div>

          <label>Descripci√≥n (opcional)</label>
          <textarea id="desc_med_general" name="desc_med_general" placeholder="Resumen breve (opcional)"></textarea>

          <div class="row">
            <div class="col">
              <label>El equipo a reportar es: <span style="color:#ffdede">*</span></label>
              <select id="equipo_medico_select" name="equipo_medico_select" required>
                <!-- se llena con JS -->
              </select>
            </div>
            <div class="col">
              <label>Sede donde est√° ubicado <span style="color:#ffdede">*</span></label>
              <select id="sede_med" name="sede_med" required>
                <option value="">Seleccione...</option>
                <option>Sede 1</option>
                <option>Sede 2</option>
                <option>Sede 3</option>
                <option>Sede 4</option>
                <option>Sede 5</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <label>√Årea <span style="color:#ffdede">*</span></label>
              <select id="area_med" name="area_med" required>
                <option value="">Seleccione...</option>
                <option>Administraci√≥n</option>
                <option>Consulta externa</option>
                <option>Enfermeria</option>
                <option>Oficina Experiencia del usuario</option>
                <option>Laboratorio</option>
                <option>Salud oral</option>
                <option>√Åreas comunes</option>
              </select>
            </div>
            <div class="col">
              <label>Ubicaci√≥n espec√≠fica <span style="color:#ffdede">*</span></label>
              <input type="text" id="ubicacion_med" name="ubicacion_med" required placeholder='Ej: "Consultorio 101"'>
            </div>
          </div>

          <label>Da√±o a reportar <span style="color:#ffdede">*</span></label>
          <textarea id="danio_med" name="danio_med" required placeholder="Brinde una descripci√≥n clara y delimitada del da√±o"></textarea>

          <label>Prioridad del caso <span style="color:#ffdede">*</span></label>
          <select id="prioridad_med" name="prioridad_med" required>
            <option value="">Seleccione...</option>
            <option>Urgente: se detiene el servicio por este da√±o (6 horas)</option>
            <option>Prioritario: no detiene el servicio pero debe ser resuelto prontamente (48 horas)</option>
            <option>Programado: no detiene el servicio y puede ser resuelto dentro del cronograma del √°rea (192 horas)</option>
          </select>
        </div>

        <!-- Adjuntos y seguimiento -->
        <div class="card">
          <div class="section-title">Adjuntos y seguimiento</div>
          <label>Adjuntar imagen o evidencia (foto)</label>
          <input type="file" id="evidence" name="evidence" accept="image/*">

          <div class="row" style="margin-top:.8rem;">
            <div class="col">
              <label>Responsable (opcional)</label>
              <input type="text" name="responsable" placeholder="Nombre del responsable asignado">
            </div>
            <div class="col">
              <label>Estado inicial</label>
              <select name="estado" id="estado">
                <option value="">Seleccione...</option>
                <option>PENDIENTE</option>
                <option>EN PROCESO</option>
                <option>CERRADO</option>
              </select>
            </div>
          </div>
        </div>

        <div style="display:flex; gap:10px; align-items:center; margin-top:6px;">
          <button type="submit" class="btn primary">Enviar Reporte</button>
          <button type="button" id="btnClear" class="btn ghost">Limpiar formulario</button>
          <div style="flex:1;text-align:right;">
            <small style="color:#a8c5e6">CorreQ ¬∑ IPS Interconsultas</small>
          </div>
        </div>
      </form>

      <div class="footer">&copy; 2025 IPS Interconsultas - Todos los derechos reservados</div>
    </section>
  </div>

  <!-- Modal de √©xito -->
  <div class="modal" id="modalExito">
    <div class="box">
      <h3>‚úÖ Reporte enviado correctamente</h3>
      <p id="modalText">Su novedad ha sido registrada. Recibir√° confirmaci√≥n al correo si lo dej√≥ en el formulario.</p>
      <div style="margin-top:1rem;">
        <button class="btn primary" id="cerrarModal">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Part√≠culas y l√≥gica -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    // Part√≠culas
    particlesJS("particles-js", {
      "particles": {
        "number": { "value": 60 },
        "size": { "value": 3 },
        "move": { "speed": 2 },
        "line_linked": { "enable": true, "color": "#06b6d4" }
      }
    });

    // --------------------------
    // Datos largos (listas) - populamos din√°micamente
    // --------------------------
    const ubicaciones = [
      "Administrativo y √°reas com√∫nes","Atenci√≥n domiciliaria","Auditorio","Ba√±o discapacitados","Ba√±o hombres","Ba√±o mujeres",
      "Bodega enfermer√≠a 1","Bodega enfermer√≠a 2","Bodega insumos salud oral","Bodega laboratorio","Bodega mantenimiento",
      "Bodega PYP medicamentos","Bodega servicios generales","Bodega unidad 8","Bodega Vacunaci√≥n","Cafetin","Centro de acopio",
      "Citolog√≠a cervicouterina 1","Citolog√≠a cervicouterina 2","Coagulaci√≥n","Compras","Consultorio 101","Consultorio 102",
      "Consultorio 103","Consultorio 104","Consultorio 105","Consultorio 106","Consultorio 107","Consultorio 200",
      "Consultorio 201","Consultorio 202","Consultorio 203","Consultorio 204","Consultorio 205","Consultorio 206",
      "Consultorio 207","Consultorio 301","Consultorio 302","Consultorio 303","Consultorio 304","Consultorio 305",
      "Consultorio 306","Consultorio 307","Consultorio 308","Consultorio 309","Consultorio 310","Consultorio 311",
      "Consultorio 312","Consultorio L1","Consultorio L2","Consultorio L3","Consultorio L5","Consultorio L6","Consultorio L7",
      "Consultorio L8","Consultorio PAC","Consultorio S1","Consultorio S10","Consultorio S11","Consultorio S12","Consultorio S13",
      "Consultorio S14","Consultorio S15","Consultorio S16","Consultorio S17","Consultorio S2","Consultorio S3","Consultorio S4",
      "Consultorio S5","Consultorio S6","Consultorio S7","Consultorio S8","Consultorio S9","Consultorio101","Contingencia",
      "Contingencia Sede 1","Contingencia Sede 2","Crecimiento y desarrollo","Cuarto de aseo","Cuarto de planta","Cuarto de tanques",
      "Enfermer√≠a","Entrevista enfermera 1","Entrevista enfermera 2","Esterilizaci√≥n","Gerencia","Gesti√≥n documental","Immunolog√≠a",
      "Laboratorio","Lavado de material","Microbiolog√≠a","Microelisa","Microscop√≠a","M√≥dulos Autorizaciones","Modulo 1","Modulo 10",
      "Modulo 11","Modulo 12","Modulo 13","Modulo 14","Modulo 15","Modulo 2","Modulo 3","Modulo 4","Modulo 5","Modulo 6","Modulo 7",
      "Modulo 8","Modulo 9","M√≥dulo PAC","Mueble Instrumental general","Odontolog√≠a","Oficina compartida","Oficina contabilidad",
      "Oficna Coworking","Oficina de riesgo cardiovascular","Oficina l√≠der Consulta externa","Oficina L√≠der de Desarrollo Humano",
      "Oficina l√≠der PYM","Oficina l√≠der salud oral","Oficina SIAU","Pasillo","PBX","Procedimientos Enfermer√≠a 1",
      "Procedimientos Enfermer√≠a 2","Procedimientos menores","Puerta principal","Qu√≠mica","RCV","Sala de espera","Sala de lactancia",
      "Sala eda","Sala ERA","Salud oral","Seroteca","Toma de electrocardiograma","Toma de muestras ginecol√≥gicas",
      "Toma de muestras pedi√°tricas","Toma de muestras piso -1","Toma de muestras piso 1","Toma de muestras piso 2",
      "Toma de rayos x","Unidad odontol√≥gica 1","Unidad odontol√≥gica 10","Unidad odontol√≥gica 11","Unidad odontol√≥gica 2",
      "Unidad odontol√≥gica 3","Unidad odontol√≥gica 4","Unidad odontol√≥gica 5","Unidad odontol√≥gica 6","Unidad odontol√≥gica 7",
      "Unidad odontol√≥gica 8","Unidad odontol√≥gica 9","Vacunaci√≥n","Ba√±o privado","Cuarto de locker privado",
      "L√≠der de Calidad y Experiencia del Usuario"
    ];

    const equipos_medicos = [
      "Fonendoscopio","Tensi√≥metro","L√°mpara cuello de cisne","Tall√≠metro adulto","Equipo de √≥rganos","B√°scula tall√≠metro",
      "Diapas√≥n","Termohigr√≥metro","Negatoscopio","Contra Angulo","B√°scula digital","Micromotor","Unidad odontol√≥gica","Scaler",
      "L√°mpara de fotocurado","Pieza de alta","Pulsox√≠metro Pedi√°trico","Gluc√≥metro","Pulsox√≠metro","Tensi√≥metro Pedi√°trico",
      "Doppler fetal","Regulador de ox√≠geno","Infant√≥metro","Silla de ruedas","Pulsoximetro","B√°scula Pedi√°trica digital",
      "B√°scula de residuos","Pieza de alta","Pipeta autom√°tica","Fonendoscopio Pedi√°trico","Termometro","Termometro Digital",
      "Lampara de fotocurado","Term√≥metro","Desfibrilador","Electrocardi√≥grafo","Termo para trasporte de vacunas","Centr√≠fuga",
      "B√°scula Tallimetro","Nebulizador","Ba√±os","Tensi√≥metro de pared","Pesas Individua 20kg","Termohigrometro","Autoclave",
      "Microscopio","Pipeta mono canal","B√°scula Pedi√°trica","Dinam√≥metro 1","B√°scula digital","Ba√±o serol√≥gico","Equipo de rayos x",
      "Piano cuenta c√©lulas","Dinam√≥metro 2","Otoscopio","Congelador modelo WC-","Refrigerador modelo MK304","Electrocauterio",
      "Termo MVE","Agitador de Mazzini","Incubadora de controles biol√≥gicos","Term√≥metro infrarrojo","Horno de cultivo",
      "Monitor de signos vitales","Horno de secado","Pieza de alta velocidad","Monofilamento de diagnostico","Incubadora",
      "Termo de crioterapia","Tall√≠metro pedi√°trico","Dinam√≥metro","Nevera de vacunas caja t√©rmica"
    ];

    // Cuando el DOM est√© listo, llenamos select con las listas largas
    document.addEventListener('DOMContentLoaded', () => {
      const ubicSelect = document.getElementById('ubicacion_infra');
      ubicaciones.forEach((u,i) => {
        const opt = document.createElement('option'); opt.value = u; opt.textContent = (i+1) + ". " + u;
        ubicSelect.appendChild(opt);
      });

      const equipMedSelect = document.getElementById('equipo_medico_select');
      equipos_medicos.forEach((e,i) => {
        const opt = document.createElement('option'); opt.value = e; opt.textContent = (i+1) + ". " + e;
        equipMedSelect.appendChild(opt);
      });

      // inicializar fecha/hora/ID
      const now = new Date();
      document.getElementById('fecha').value = now.toLocaleDateString('es-CO');
      document.getElementById('hora').value = now.toLocaleTimeString('es-CO');
      const id = "REP-" + now.getFullYear() + "-" + String(now.getTime()).slice(-6);
      document.getElementById('idReporte').value = id;
      document.getElementById('idNote').textContent = id;
    });

    // --------------------------
    // UI: mostrar secciones segun tipo_reporte
    // --------------------------
    const tipoSelect = document.getElementById('tipo_reporte');
    tipoSelect.addEventListener('change', (e) => {
      const v = e.target.value;
      document.getElementById('section_infra').style.display = v === 'infraestructura' ? 'block' : 'none';
      document.getElementById('section_med').style.display = v === 'equipo_medico' ? 'block' : 'none';
      updateProgress();
      // scroll hacia la secci√≥n mostrada para mejor UX en m√≥vil
      setTimeout(()=> {
        const el = v === 'infraestructura' ? document.getElementById('section_infra') : document.getElementById('section_med');
        if (el) el.scrollIntoView({behavior:'smooth', block:'start'});
      }, 100);
    });

    // --------------------------
    // Barra de progreso simple (cuenta campos no vac√≠os)
    // --------------------------
    function updateProgress() {
      const inputs = Array.from(document.querySelectorAll('#reporteForm input[type="text"], #reporteForm input[type="email"], #reporteForm select, #reporteForm textarea'));
      const filled = inputs.filter(i => i.value && i.value.trim() !== '').length;
      const percent = Math.round((filled / inputs.length) * 100);
      document.getElementById('progress').style.width = percent + '%';
    }
    document.getElementById('reporteForm').addEventListener('input', updateProgress);

    // --------------------------
    // Limpiar formulario
    // --------------------------
    document.getElementById('btnClear').addEventListener('click', () => {
      if (confirm("¬øDesea limpiar todos los campos del formulario?")) {
        document.getElementById('reporteForm').reset();
        updateProgress();
      }
    });

    // --------------------------
    // Env√≠o al Google Apps Script
    // --------------------------
    const scriptURL = "https://script.google.com/macros/s/AKfycbyhTYQlEpLFZIObGFLiFtOAStwuEUw6xsTTVjh-xDmWfVDunYO_ccszitMLtFYv9p7e1w/exec";
    const form = document.getElementById('reporteForm');

    form.addEventListener('submit', e => {
      e.preventDefault();

      // Validaciones condicionales
      const tipo = document.getElementById('tipo_reporte').value;
      const nombre = document.getElementById('nombre').value.trim();
      if (!nombre) { alert("Por favor ingrese el Nombre completo."); return; }
      if (!tipo) { alert("Por favor seleccione si el reporte es de Infraestructura o Equipo M√©dico."); return; }

      if (tipo === 'infraestructura') {
        if (!document.getElementById('area_infra').value) { alert("Seleccione el √Årea espec√≠fica."); return; }
        if (!document.getElementById('ubicacion_infra').value) { alert("Seleccione la Ubicaci√≥n espec√≠fica."); return; }
        if (!document.getElementById('sede_infra').value) { alert("Seleccione la Sede."); return; }
        if (!document.getElementById('prioridad_infra').value) { alert("Seleccione la Clasificaci√≥n de prioridad."); return; }
        if (!document.getElementById('categoria_infra').value) { alert("Seleccione la Categor√≠a del reporte."); return; }
      } else {
        // equipo m√©dico
        if (!document.getElementById('equipo_medico_select').value) { alert("Seleccione el equipo a reportar."); return; }
        if (!document.getElementById('sede_med').value) { alert("Seleccione la Sede del equipo."); return; }
        if (!document.getElementById('area_med').value) { alert("Seleccione el √Årea del equipo."); return; }
        if (!document.getElementById('ubicacion_med').value.trim()) { alert("Detalle la Ubicaci√≥n espec√≠fica del equipo."); return; }
        if (!document.getElementById('danio_med').value.trim()) { alert("Describa el da√±o o la falla reportada."); return; }
        if (!document.getElementById('prioridad_med').value) { alert("Seleccione la Prioridad del caso."); return; }
      }

      // Prepara FormData
      const fd = new FormData(form);
      // agregamos un campo con marca de tiempo real
      fd.append('timestamp', new Date().toISOString());

      // Mostrar loading b√°sico (deshabilitar enviar)
      const btn = form.querySelector('button[type="submit"]');
      btn.disabled = true; btn.textContent = 'Enviando...';

      // Enviar
      fetch(scriptURL, { method: 'POST', body: fd })
        .then(response => {
          // reactivar boton
          btn.disabled = false; btn.textContent = 'Enviar Reporte';

          // abrir modal de confirmaci√≥n con info breve
          document.getElementById('modalText').textContent = "Su novedad ha sido registrada correctamente. ID: " + document.getElementById('idReporte').value;
          document.getElementById('modalExito').style.display = 'flex';

          // limpiar el formulario manteniendo ID y fecha/hora
          const savedID = document.getElementById('idReporte').value;
          const savedFecha = document.getElementById('fecha').value;
          const savedHora = document.getElementById('hora').value;
          form.reset();
          document.getElementById('idReporte').value = savedID;
          document.getElementById('fecha').value = savedFecha;
          document.getElementById('hora').value = savedHora;
          updateProgress();
        })
        .catch(err => {
          btn.disabled = false; btn.textContent = 'Enviar Reporte';
          alert("‚ùå Error al enviar el formulario: " + err.message);
        });
    });

    // Cerrar modal
    document.getElementById('cerrarModal').addEventListener('click', () => {
      document.getElementById('modalExito').style.display = 'none';
    });
    // cerrar modal con click fuera
    document.getElementById('modalExito').addEventListener('click', (e) => {
      if (e.target === document.getElementById('modalExito')) document.getElementById('modalExito').style.display = 'none';
    });

    // actualizar email en UI si el usuario lo escribe
    document.getElementById('email').addEventListener('input', () => {
      document.getElementById('userEmail').textContent = "Usuario: " + (document.getElementById('email').value || "(correo se captura al enviar)");
    });

    // inicial update progress
    setTimeout(updateProgress, 200);
  </script>
</body>
</html>


