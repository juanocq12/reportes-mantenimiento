<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario de Reporte</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f4f6f9; font-family: "Segoe UI", sans-serif; }
    .form-card { background: #fff; border-radius: 16px; padding: 2rem; box-shadow: 0 6px 12px rgba(0,0,0,0.08); }
    h2 { color: #1a73e8; font-weight: 700; }
    label { font-weight: 500; margin-top: 0.5rem; }
    .form-section { display: none; }
    .btn-primary { background: #1a73e8; border: none; border-radius: 10px; }
    .btn-primary:hover { background: #1558b0; }
    .divider { border-top: 2px solid #e1e5eb; margin: 2rem 0; }
  </style>
</head>
<body>
<div class="container my-5">
  <div class="form-card">
    <h2 class="text-center mb-4">üìã Formulario de Reporte</h2>
    <form id="reporteForm">

      <!-- üîπ Datos b√°sicos -->
      <h5>Datos b√°sicos</h5>
      <div class="row g-3">
        <div class="col-md-6">
          <label>Fecha</label>
          <input type="date" class="form-control" name="fecha" required>
        </div>
        <div class="col-md-6">
          <label>Hora</label>
          <input type="time" class="form-control" name="hora" required>
        </div>
        <div class="col-md-6">
          <label>Nombre completo</label>
          <input type="text" class="form-control" name="nombre" required>
        </div>
        <div class="col-md-6">
          <label>Correo electr√≥nico</label>
          <input type="email" class="form-control" name="correo" required>
        </div>
        <div class="col-md-6">
          <label>Sede</label>
          <select class="form-select" name="sede" required>
            <option value="">Seleccione...</option>
            <option>Sede 1</option>
            <option>Sede 2</option>
            <option>Sede 3</option>
            <option>Sede 4</option>
          </select>
        </div>
        <div class="col-md-6">
          <label>Ubicaci√≥n espec√≠fica</label>
          <input type="text" class="form-control" name="ubicacion" placeholder="Ej: Consultorio 106">
        </div>
      </div>

      <div class="divider"></div>

      <!-- üîπ Detalles del reporte -->
      <h5>Detalles del reporte</h5>
      <div class="mb-3">
        <label>Categor√≠a del reporte</label>
        <select class="form-select" id="categoria" name="categoria" required>
          <option value="">Seleccione...</option>
          <option value="infraestructura">Infraestructura y equipos de apoyo</option>
          <option value="electricos">Equipos el√©ctricos</option>
          <option value="electronicos">Equipos electr√≥nicos</option>
          <option value="computo">Equipos de c√≥mputo</option>
          <option value="muebles">Muebles y enseres</option>
        </select>
      </div>

      <!-- Secciones din√°micas -->
      <div id="infraestructura" class="form-section">
        <label>Descripci√≥n de la falla</label>
        <textarea class="form-control" name="detalle_infra" rows="3"></textarea>
      </div>
      <div id="electricos" class="form-section">
        <label>Descripci√≥n de la falla el√©ctrica</label>
        <textarea class="form-control" name="detalle_electrico" rows="3"></textarea>
      </div>
      <div id="electronicos" class="form-section">
        <label>Descripci√≥n de la falla electr√≥nica</label>
        <textarea class="form-control" name="detalle_electronico" rows="3"></textarea>
      </div>
      <div id="computo" class="form-section">
        <label>Descripci√≥n del reporte de c√≥mputo</label>
        <textarea class="form-control" name="detalle_computo" rows="3"></textarea>
      </div>
      <div id="muebles" class="form-section">
        <label>Descripci√≥n del reporte de muebles</label>
        <textarea class="form-control" name="detalle_muebles" rows="3"></textarea>
      </div>

      <div class="mb-3 mt-3">
        <label>Prioridad del caso</label>
        <select class="form-select" name="prioridad" required>
          <option value="">Seleccione...</option>
          <option>Alta</option>
          <option>Media</option>
          <option>Baja</option>
        </select>
      </div>

      <div class="divider"></div>

      <!-- üîπ Seguimiento -->
      <h5>Seguimiento</h5>
      <div class="row g-3">
        <div class="col-md-6">
          <label>Estado</label>
          <select class="form-select" name="estado">
            <option>Pendiente</option>
            <option>En gesti√≥n</option>
            <option>Realizado</option>
          </select>
        </div>
        <div class="col-md-6">
          <label>Responsable</label>
          <input type="text" class="form-control" name="responsable">
        </div>
        <div class="col-12">
          <label>Observaciones</label>
          <textarea class="form-control" name="observacion" rows="2"></textarea>
        </div>
      </div>

      <div class="text-center mt-4">
        <button type="submit" class="btn btn-primary btn-lg px-5">Enviar reporte</button>
      </div>
    </form>
  </div>
</div>

<!-- JS -->
<script>
  // üîÑ Mostrar campos din√°micos seg√∫n categor√≠a
  document.getElementById('categoria').addEventListener('change', function() {
    document.querySelectorAll('.form-section').forEach(sec => sec.style.display = 'none');
    if (this.value) {
      document.getElementById(this.value).style.display = 'block';
    }
  });

  // üîó Conexi√≥n a Apps Script
  const scriptURL = "https://script.google.com/macros/s/AKfycbyhTYQlEpLFZIObGFLiFtOAStwuEUw6xsTTVjh-xDmWfVDunYO_ccszitMLtFYv9p7e1w/exec";
  const form = document.getElementById("reporteForm");
  form.addEventListener("submit", e => {
    e.preventDefault();
    fetch(scriptURL, { method: "POST", body: new FormData(form)})
      .then(() => {
        alert("‚úÖ Reporte enviado correctamente");
        form.reset();
      })
      .catch(error => alert("‚ùå Error al enviar: " + error.message));
  });
</script>
</body>
</html>


